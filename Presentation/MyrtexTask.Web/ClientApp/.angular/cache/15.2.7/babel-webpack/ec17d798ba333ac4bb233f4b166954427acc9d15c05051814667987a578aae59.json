{"ast":null,"code":"import { EmployeeService } from './employee.service';\nimport { Employee } from './Employee';\nimport { AgGridAngular } from 'ag-grid-angular';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./employee.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"ag-grid-angular\";\nimport * as i4 from \"@angular/forms\";\nfunction EmployeesComponent_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\")(1, \"em\");\n    i0.ɵɵtext(2, \"Loading...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class EmployeesComponent {\n  constructor(employeeService) {\n    this.employeeService = employeeService;\n    this.employee = new Employee();\n    this.columnDefs = [{\n      headerName: 'Id',\n      field: \"id\",\n      sortable: \"true\",\n      filter: \"true\",\n      hide: \"true\"\n    }, {\n      headerName: 'Отдел',\n      field: \"department\",\n      sortable: \"true\",\n      filter: \"true\"\n    }, {\n      headerName: 'Полное имя',\n      field: \"fullName\",\n      sortable: \"true\",\n      filter: \"true\"\n    }, {\n      headerName: 'Дата рождения',\n      field: \"dateOfBirth\",\n      sortable: \"true\",\n      filter: \"agDateColumnFilter\",\n      cellRenderer: data => {\n        return data.value ? new Date(data.value).toLocaleDateString() : '';\n      },\n      cellDataType: 'date',\n      //компаратор для фильтрации даты рождения\n      filterParams: {\n        comparator: (filterLocalDateAtMidnight, cellValue) => {\n          const dateAsString = cellValue;\n          if (dateAsString == null) {\n            return 0;\n          }\n          const dateParts = dateAsString.split('.');\n          const year = Number(dateParts[2]);\n          const month = Number(dateParts[1]) - 1;\n          const day = Number(dateParts[0]);\n          const cellDate = new Date(year, month, day);\n          if (cellDate < filterLocalDateAtMidnight) {\n            return -1;\n          } else if (cellDate > filterLocalDateAtMidnight) {\n            return 1;\n          }\n          return 0;\n        }\n      }\n    }, {\n      headerName: 'Дата приема на работу',\n      field: \"dateOfEmployment\",\n      sortable: \"true\",\n      filter: \"agDateColumnFilter\",\n      cellRenderer: data => {\n        return data.value ? new Date(data.value).toLocaleDateString() : '';\n      },\n      cellDataType: 'date'\n    }, {\n      headerName: 'Зарплата',\n      field: \"salary\",\n      sortable: \"true\",\n      filter: \"true\"\n    }];\n    this.rowData = [];\n  }\n  ngOnInit() {\n    this.loadEmployees();\n  }\n  loadEmployees() {\n    this.employeeService.getEmployees().subscribe(data => {\n      this.rowData = data;\n    });\n  }\n  save() {\n    if (this.employee.id == null) {\n      this.employeeService.createEmployee(this.employee).subscribe(data => this.loadEmployees());\n    } else {\n      this.employeeService.updateEmployee(this.employee).subscribe(data => this.loadEmployees());\n    }\n    this.clearSelection();\n  }\n  delete(p) {\n    this.employeeService.deleteEmployee(p.id).subscribe(data => this.loadEmployees());\n    this.clearSelection();\n  }\n  add() {\n    this.clearSelection();\n  }\n  onSelection() {\n    if (this.agGrid.api.getSelectedRows().length == 1) this.employee = this.agGrid.api.getSelectedRows()[0];\n  }\n  clearSelection() {\n    this.agGrid.api.deselectAll();\n    this.employee = new Employee();\n  }\n}\nEmployeesComponent.ɵfac = function EmployeesComponent_Factory(t) {\n  return new (t || EmployeesComponent)(i0.ɵɵdirectiveInject(i1.EmployeeService));\n};\nEmployeesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EmployeesComponent,\n  selectors: [[\"app-employees\"]],\n  viewQuery: function EmployeesComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(AgGridAngular, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.agGrid = _t.first);\n    }\n  },\n  features: [i0.ɵɵProvidersFeature([EmployeeService])],\n  decls: 107,\n  vars: 16,\n  consts: [[\"id\", \"tableLabel\"], [4, \"ngIf\"], [1, \"d-flex\", \"flex-row\"], [1, \"ag-theme-alpine\", 2, \"width\", \"1000px\", \"height\", \"600px\", 3, \"columnDefs\", \"rowSelection\", \"rowData\", \"selectionChanged\"], [\"role\", \"group\", 1, \"btn-group-vertical\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#createModal\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#createModal\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#deleteModal\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [\"id\", \"createModal\", \"data-bs-backdrop\", \"static\", \"tabindex\", \"-1\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\", 1, \"btn-close\"], [1, \"modal-body\"], [\"for\", \"inputDepartment\"], [\"type\", \"text\", \"id\", \"inputDepartment\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"inputFullname\"], [\"type\", \"text\", \"id\", \"inputFullName\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"inputDateOfBirth\"], [\"type\", \"date\", \"id\", \"inputDateOfBirth\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"inputDateOfEmployment\"], [\"type\", \"date\", \"id\", \"inputDateOfEmployment\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"inputSalary\"], [\"type\", \"number\", \"id\", \"inputSalary\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"id\", \"UpdateModal\", \"data-bs-backdrop\", \"static\", \"tabindex\", \"-1\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [\"id\", \"deleteModal\", \"data-bs-backdrop\", \"static\", \"tabindex\", \"-1\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"]],\n  template: function EmployeesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\", 0);\n      i0.ɵɵtext(1, \"\\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u043E\\u0432\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, EmployeesComponent_p_2_Template, 3, 0, \"p\", 1);\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\")(5, \"ag-grid-angular\", 3);\n      i0.ɵɵlistener(\"selectionChanged\", function EmployeesComponent_Template_ag_grid_angular_selectionChanged_5_listener() {\n        return ctx.onSelection();\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"div\", 4)(7, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function EmployeesComponent_Template_button_click_7_listener() {\n        return ctx.add();\n      });\n      i0.ɵɵtext(8, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"button\", 6);\n      i0.ɵɵtext(10, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"button\", 7);\n      i0.ɵɵtext(12, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(13, \"button\", 8);\n      i0.ɵɵlistener(\"click\", function EmployeesComponent_Template_button_click_13_listener() {\n        return ctx.clearSelection();\n      });\n      i0.ɵɵtext(14, \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u0432\\u044B\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\", 9)(16, \"div\", 10)(17, \"div\", 11)(18, \"div\", 12)(19, \"h4\", 13);\n      i0.ɵɵtext(20, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(21, \"button\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"div\", 15)(23, \"div\")(24, \"label\", 16);\n      i0.ɵɵtext(25, \"\\u041E\\u0442\\u0434\\u0435\\u043B\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"div\")(27, \"input\", 17);\n      i0.ɵɵlistener(\"ngModelChange\", function EmployeesComponent_Template_input_ngModelChange_27_listener($event) {\n        return ctx.employee.department = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(28, \"div\")(29, \"label\", 18);\n      i0.ɵɵtext(30, \"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u0438\\u043C\\u044F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(31, \"div\")(32, \"input\", 19);\n      i0.ɵɵlistener(\"ngModelChange\", function EmployeesComponent_Template_input_ngModelChange_32_listener($event) {\n        return ctx.employee.fullName = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(33, \"div\")(34, \"label\", 20);\n      i0.ɵɵtext(35, \"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u043E\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"div\")(37, \"input\", 21);\n      i0.ɵɵlistener(\"ngModelChange\", function EmployeesComponent_Template_input_ngModelChange_37_listener($event) {\n        return ctx.employee.dateOfBirth = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(38, \"div\")(39, \"label\", 22);\n      i0.ɵɵtext(40, \"\\u0414\\u0430\\u0442\\u0430 \\u043F\\u0440\\u0438\\u0435\\u043C\\u0430 \\u043D\\u0430 \\u0440\\u0430\\u0431\\u043E\\u0442\\u0443\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"div\")(42, \"input\", 23);\n      i0.ɵɵlistener(\"ngModelChange\", function EmployeesComponent_Template_input_ngModelChange_42_listener($event) {\n        return ctx.employee.dateOfEmployment = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(43, \"div\")(44, \"label\", 24);\n      i0.ɵɵtext(45, \"\\u0417\\u0430\\u0440\\u043F\\u0430\\u0442\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"div\")(47, \"input\", 25);\n      i0.ɵɵlistener(\"ngModelChange\", function EmployeesComponent_Template_input_ngModelChange_47_listener($event) {\n        return ctx.employee.salary = $event;\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(48, \"div\", 26)(49, \"button\", 27);\n      i0.ɵɵlistener(\"click\", function EmployeesComponent_Template_button_click_49_listener() {\n        return ctx.save();\n      });\n      i0.ɵɵtext(50, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(51, \"button\", 28);\n      i0.ɵɵtext(52, \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(53, \"div\", 29)(54, \"div\", 10)(55, \"div\", 11)(56, \"div\", 12)(57, \"h4\", 13);\n      i0.ɵɵtext(58, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(59, \"button\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(60, \"div\", 15)(61, \"div\")(62, \"label\", 16);\n      i0.ɵɵtext(63, \"\\u041E\\u0442\\u0434\\u0435\\u043B\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(64, \"div\")(65, \"input\", 17);\n      i0.ɵɵlistener(\"ngModelChange\", function EmployeesComponent_Template_input_ngModelChange_65_listener($event) {\n        return ctx.employee.department = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(66, \"div\")(67, \"label\", 18);\n      i0.ɵɵtext(68, \"\\u041F\\u043E\\u043B\\u043D\\u043E\\u0435 \\u0438\\u043C\\u044F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(69, \"div\")(70, \"input\", 19);\n      i0.ɵɵlistener(\"ngModelChange\", function EmployeesComponent_Template_input_ngModelChange_70_listener($event) {\n        return ctx.employee.fullName = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(71, \"div\")(72, \"label\", 20);\n      i0.ɵɵtext(73, \"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u043E\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(74, \"div\")(75, \"input\", 21);\n      i0.ɵɵlistener(\"ngModelChange\", function EmployeesComponent_Template_input_ngModelChange_75_listener($event) {\n        return ctx.employee.dateOfBirth = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(76, \"div\")(77, \"label\", 22);\n      i0.ɵɵtext(78, \"\\u0414\\u0430\\u0442\\u0430 \\u043F\\u0440\\u0438\\u0435\\u043C\\u0430 \\u043D\\u0430 \\u0440\\u0430\\u0431\\u043E\\u0442\\u0443\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(79, \"div\")(80, \"input\", 23);\n      i0.ɵɵlistener(\"ngModelChange\", function EmployeesComponent_Template_input_ngModelChange_80_listener($event) {\n        return ctx.employee.dateOfEmployment = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(81, \"div\")(82, \"label\", 24);\n      i0.ɵɵtext(83, \"\\u0417\\u0430\\u0440\\u043F\\u0430\\u0442\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(84, \"div\")(85, \"input\", 25);\n      i0.ɵɵlistener(\"ngModelChange\", function EmployeesComponent_Template_input_ngModelChange_85_listener($event) {\n        return ctx.employee.salary = $event;\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(86, \"div\", 26)(87, \"button\", 27);\n      i0.ɵɵlistener(\"click\", function EmployeesComponent_Template_button_click_87_listener() {\n        return ctx.save();\n      });\n      i0.ɵɵtext(88, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(89, \"button\", 28);\n      i0.ɵɵtext(90, \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(91, \"div\", 30)(92, \"div\", 10)(93, \"div\", 11)(94, \"div\", 12)(95, \"h4\", 13);\n      i0.ɵɵtext(96, \"\\u0423\\u0434\\u0430\\u043B\\u0435\\u043D\\u0438\\u0435 \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(97, \"button\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(98, \"div\", 15)(99, \"p\");\n      i0.ɵɵtext(100, \"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0432\\u044B\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0433\\u043E \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430?\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(101, \"div\", 26)(102, \"div\")(103, \"button\", 27);\n      i0.ɵɵlistener(\"click\", function EmployeesComponent_Template_button_click_103_listener() {\n        return ctx.delete(ctx.employee);\n      });\n      i0.ɵɵtext(104, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(105, \"button\", 28);\n      i0.ɵɵtext(106, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.rowData);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"columnDefs\", ctx.columnDefs)(\"rowSelection\", \"single\")(\"rowData\", ctx.rowData);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"disabled\", ctx.employee.id == null);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.employee.id == null);\n      i0.ɵɵadvance(16);\n      i0.ɵɵproperty(\"ngModel\", ctx.employee.department);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.employee.fullName);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.employee.dateOfBirth);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.employee.dateOfEmployment);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.employee.salary);\n      i0.ɵɵadvance(18);\n      i0.ɵɵproperty(\"ngModel\", ctx.employee.department);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.employee.fullName);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.employee.dateOfBirth);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.employee.dateOfEmployment);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.employee.salary);\n    }\n  },\n  dependencies: [i2.NgIf, i3.AgGridAngular, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.NgModel],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["EmployeeService","Employee","AgGridAngular","i0","EmployeesComponent","constructor","employeeService","headerName","field","sortable","filter","hide","cellRenderer","data","value","Date","toLocaleDateString","cellDataType","filterParams","comparator","filterLocalDateAtMidnight","cellValue","dateAsString","dateParts","split","year","Number","month","day","cellDate","ngOnInit","loadEmployees","getEmployees","subscribe","rowData","save","employee","id","createEmployee","updateEmployee","clearSelection","delete","p","deleteEmployee","add","onSelection","agGrid","api","getSelectedRows","length","deselectAll","selectors","viewQuery","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Ryadn\\source\\repos\\MyrtexTask\\Presentation\\MyrtexTask.Web\\ClientApp\\src\\app\\employees\\employees.component.ts","C:\\Users\\Ryadn\\source\\repos\\MyrtexTask\\Presentation\\MyrtexTask.Web\\ClientApp\\src\\app\\employees\\employees.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { EmployeeService } from './employee.service';\r\nimport { Employee } from './Employee';\r\nimport { Observable, Subject } from 'rxjs'; \r\nimport { ColDef, GridApi, GridOptions, SelectionChangedEvent } from 'ag-grid';\r\nimport { AgGridAngular } from 'ag-grid-angular';\r\nimport { IDateFilterParams } from 'ag-grid/dist/lib/filter/dateFilter';\r\n\r\n@Component({\r\n  selector: 'app-employees',\r\n  templateUrl: './employees.component.html',\r\n  providers: [EmployeeService]\r\n})\r\nexport class EmployeesComponent implements OnInit {\r\n\r\n  employee: Employee = new Employee();\r\n  columnDefs: any[] = [\r\n    { headerName: 'Id', field: \"id\", sortable: \"true\", filter: \"true\", hide: \"true\" },\r\n\r\n    { headerName: 'Отдел', field: \"department\", sortable: \"true\", filter: \"true\" },\r\n\r\n    { headerName: 'Полное имя', field: \"fullName\", sortable: \"true\", filter: \"true\" },\r\n\r\n\r\n    {\r\n      headerName: 'Дата рождения', field: \"dateOfBirth\", sortable: \"true\", filter: \"agDateColumnFilter\", cellRenderer: (data: { value: string | number | Date; }) => {\r\n        return data.value ? (new Date(data.value)).toLocaleDateString() : '';\r\n      }, cellDataType: 'date',\r\n\r\n      //компаратор для фильтрации даты рождения\r\n      filterParams: {\r\n        comparator: (filterLocalDateAtMidnight: Date, cellValue: any) => {\r\n          const dateAsString = cellValue;\r\n\r\n          if (dateAsString == null) {\r\n            return 0;\r\n          }\r\n\r\n          const dateParts = dateAsString.split('.');\r\n          const year = Number(dateParts[2]);\r\n          const month = Number(dateParts[1]) - 1;\r\n          const day = Number(dateParts[0]);\r\n          const cellDate = new Date(year, month, day);\r\n\r\n          if (cellDate < filterLocalDateAtMidnight) {\r\n            return -1;\r\n          } else if (cellDate > filterLocalDateAtMidnight) {\r\n            return 1;\r\n          }\r\n          return 0;\r\n        }\r\n      }\r\n    },\r\n\r\n\r\n    {\r\n      headerName: 'Дата приема на работу', field: \"dateOfEmployment\", sortable: \"true\", filter: \"agDateColumnFilter\", cellRenderer: (data: { value: string | number | Date; }) => {\r\n        return data.value ? (new Date(data.value)).toLocaleDateString() : '';\r\n      }, cellDataType: 'date'\r\n    },\r\n    { headerName: 'Зарплата', field: \"salary\", sortable: \"true\", filter: \"true\" }\r\n  ];\r\n  rowData: Employee[] = [];\r\n\r\n  @ViewChild(AgGridAngular) agGrid!: AgGridAngular;\r\n\r\n  constructor(private employeeService: EmployeeService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.loadEmployees();\r\n  }\r\n\r\n  loadEmployees() {\r\n    this.employeeService.getEmployees()\r\n      .subscribe(data => {\r\n        this.rowData = data;\r\n      });\r\n  }\r\n\r\n  save() {\r\n    if (this.employee.id == null) {\r\n      this.employeeService.createEmployee(this.employee)\r\n        .subscribe(data => this.loadEmployees());\r\n    } else {\r\n      this.employeeService.updateEmployee(this.employee)\r\n        .subscribe(data => this.loadEmployees());\r\n\r\n    }\r\n    this.clearSelection();\r\n  }\r\n\r\n  delete(p: Employee) {\r\n    this.employeeService.deleteEmployee(p.id)\r\n      .subscribe(data => this.loadEmployees());\r\n\r\n    this.clearSelection();\r\n  }\r\n\r\n  add() {\r\n    this.clearSelection();\r\n  }\r\n\r\n  onSelection() {\r\n    if (this.agGrid.api.getSelectedRows().length == 1)\r\n      this.employee = this.agGrid.api.getSelectedRows()[0];\r\n  }\r\n\r\n  clearSelection() {\r\n    this.agGrid.api.deselectAll();\r\n    this.employee = new Employee();\r\n  }\r\n}\r\n","<h1 id=\"tableLabel\">Список сотрудников</h1>\r\n\r\n<p *ngIf=\"!rowData\"><em>Loading...</em></p>\r\n\r\n<div class=\"d-flex flex-row\">\r\n\r\n  <div>\r\n    <ag-grid-angular style=\"width: 1000px; height: 600px;\"\r\n                     class=\"ag-theme-alpine\"\r\n                     [columnDefs]=\"columnDefs\"\r\n                     [rowSelection]=\"'single'\"\r\n                     [rowData]=\"rowData\"\r\n                     (selectionChanged)=\"onSelection()\">\r\n    </ag-grid-angular>\r\n  </div>\r\n\r\n    <div class=\"btn-group-vertical\" role=\"group\">\r\n      <button class=\"btn btn-primary\" (click)=\"add()\" data-bs-toggle=\"modal\" data-bs-target=\"#createModal\">Добавить</button>\r\n      <button class=\"btn btn-primary\" [disabled]=\"employee.id == null\" data-bs-toggle=\"modal\" data-bs-target=\"#createModal\">Редактировать</button>\r\n      <button class=\"btn btn-primary\" [disabled]=\"employee.id == null\" data-bs-toggle=\"modal\" data-bs-target=\"#deleteModal\">Удалить</button>\r\n    </div>\r\n</div>\r\n\r\n<button class=\"btn btn-primary\" (click) =\"clearSelection()\">Сбросить выделение</button>\r\n<!--Модальное окно добавления-->\r\n\r\n<div class=\"modal fade\" id=\"createModal\" data-bs-backdrop=\"static\" tabindex=\"-1\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h4 class=\"modal-title\">Добавление сотрудника</h4>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Закрыть\"></button>\r\n      </div>\r\n\r\n\r\n      <div class=\"modal-body\">\r\n\r\n        <div>\r\n          <label for=\"inputDepartment\">Отдел</label>\r\n          <div>\r\n            <input type=\"text\" [(ngModel)]=\"employee.department\" class=\"form-control\" id=\"inputDepartment\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"inputFullname\">Полное имя</label>\r\n          <div>\r\n            <input type=\"text\" [(ngModel)]=\"employee.fullName\" class=\"form-control\" id=\"inputFullName\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"inputDateOfBirth\">Дата рождения</label>\r\n          <div>\r\n            <input type=\"date\" [(ngModel)]=\"employee.dateOfBirth\" class=\"form-control\" id=\"inputDateOfBirth\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"inputDateOfEmployment\">Дата приема на работу</label>\r\n          <div>\r\n            <input type=\"date\" [(ngModel)]=\"employee.dateOfEmployment\" class=\"form-control\" id=\"inputDateOfEmployment\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"inputSalary\">Зарпата</label>\r\n          <div>\r\n            <input type=\"number\" [(ngModel)]=\"employee.salary\" class=\"form-control\" id=\"inputSalary\" />\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" (click)=\"save()\" data-bs-dismiss=\"modal\">Сохранить</button>\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Закрыть</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n\r\n<!--Модальное окно редактирования-->\r\n\r\n<div class=\"modal fade\" id=\"UpdateModal\" data-bs-backdrop=\"static\" tabindex=\"-1\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h4 class=\"modal-title\">Редактирование сотрудника</h4>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Закрыть\"></button>\r\n      </div>\r\n\r\n\r\n      <div class=\"modal-body\">\r\n\r\n        <div>\r\n          <label for=\"inputDepartment\">Отдел</label>\r\n          <div>\r\n            <input type=\"text\" [(ngModel)]=\"employee.department\" class=\"form-control\" id=\"inputDepartment\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"inputFullname\">Полное имя</label>\r\n          <div>\r\n            <input type=\"text\" [(ngModel)]=\"employee.fullName\" class=\"form-control\" id=\"inputFullName\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"inputDateOfBirth\">Дата рождения</label>\r\n          <div>\r\n            <input type=\"date\" [(ngModel)]=\"employee.dateOfBirth\" class=\"form-control\" id=\"inputDateOfBirth\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"inputDateOfEmployment\">Дата приема на работу</label>\r\n          <div>\r\n            <input type=\"date\" [(ngModel)]=\"employee.dateOfEmployment\" class=\"form-control\" id=\"inputDateOfEmployment\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label for=\"inputSalary\">Зарпата</label>\r\n          <div>\r\n            <input type=\"number\" [(ngModel)]=\"employee.salary\" class=\"form-control\" id=\"inputSalary\" />\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" (click)=\"save()\" data-bs-dismiss=\"modal\">Сохранить</button>\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Закрыть</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n\r\n<!--Модальное окно удаления-->\r\n\r\n<div class=\"modal fade\" id=\"deleteModal\" data-bs-backdrop=\"static\" tabindex=\"-1\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h4 class=\"modal-title\">Удаление сотрудника</h4>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Закрыть\"></button>\r\n      </div>\r\n\r\n      <div class=\"modal-body\">\r\n        <p>Вы уверены, что хотите удалить выбранного сотрудника?</p>\r\n      </div>\r\n\r\n      <div class=\"modal-footer\">\r\n        <div>\r\n          <button type=\"button\" class=\"btn btn-secondary\" (click)=\"delete(employee)\" data-bs-dismiss=\"modal\">Удалить</button>\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Отмена</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}